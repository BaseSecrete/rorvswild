<div data-barber="RorVsWild.Live" data-json="%{data}">
</div>

<script type="x-tmpl-mustache" data-partial="RorVsWild.Live">
  <div class="rorvswild-live-toggler" data-events="click->toggle">{{lastRuntime}}<small>ms</small></div>
  <div id="rorvswild-live-requests" class="rorvswild-live-panel" style="{{containerStyle}}">

    <div class="rorvswild-live-panel__header">
      <div data-events="click->collapse" class="rorvswild-live-panel__close">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </div>
      <a href="https://www.rorvswild.com" class="rorvswild-live-panel__logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34.83 30.83">
          <polygon points="17.41 9.41 13.41 9.41 9.41 13.41 17.41 21.41 25.41 13.41 21.41 9.41 17.41 9.41"/>
          <polyline points="1.41 21.41 9.41 29.41 17.41 21.41 25.41 29.41 33.41 21.41"/>
          <polyline points="9.41 5.41 5.41 1.41 1.41 5.41"/>
          <polyline points="33.41 5.41 29.41 1.41 25.41 5.41"/>
        </svg>
      </a>

      {{#currentRequest}}
        <span class="rorvswild-live-panel__header__title">breakdown</span>
      {{/currentRequest}}
      {{^currentRequest}}
        <span class="rorvswild-live-panel__header__title">history</span>
      {{/currentRequest}}

      <a href="https://github.com/BaseSecrete/rorvswild" class="rorvswild-live-panel__github">
        <svg width="16px" height="16px" viewBox="0 0 16 16">
          <path d="M8,0 C3.58,0 0,3.58 0,8 C0,11.54 2.29,14.53 5.47,15.59 C5.87,15.66 6.02,15.42 6.02,15.21 C6.02,15.02 6.01,14.39 6.01,13.72 C4,14.09 3.48,13.23 3.32,12.78 C3.23,12.55 2.84,11.84 2.5,11.65 C2.22,11.5 1.82,11.13 2.49,11.12 C3.12,11.11 3.57,11.7 3.72,11.94 C4.44,13.15 5.59,12.81 6.05,12.6 C6.12,12.08 6.33,11.73 6.56,11.53 C4.78,11.33 2.92,10.64 2.92,7.58 C2.92,6.71 3.23,5.99 3.74,5.43 C3.66,5.23 3.38,4.41 3.82,3.31 C3.82,3.31 4.49,3.1 6.02,4.13 C6.66,3.95 7.34,3.86 8.02,3.86 C8.7,3.86 9.38,3.95 10.02,4.13 C11.55,3.09 12.22,3.31 12.22,3.31 C12.66,4.41 12.38,5.23 12.3,5.43 C12.81,5.99 13.12,6.7 13.12,7.58 C13.12,10.65 11.25,11.33 9.47,11.53 C9.76,11.78 10.01,12.26 10.01,13.01 C10.01,14.08 10,14.94 10,15.21 C10,15.42 10.15,15.67 10.55,15.59 C13.71,14.53 16,11.53 16,8 C16,3.58 12.42,0 8,0 L8,0 Z"></path>
        </svg>
      </a>
    </div>
    <div class="rorvswild-live-panel__content">
      {{#currentRequest}}
        <div data-events="click->goToHistory" class="rorvswild-live-panel__back-button">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <line x1="20" y1="12" x2="4" y2="12"></line>
            <polyline points="10 18 4 12 10 6"></polyline>
          </svg>
        </div>
        {{> RorVsWild.Live.RequestDetails}}
      {{/currentRequest}}

      {{^currentRequest}}
        {{#requests}}
          {{> RorVsWild.Live.RequestSummary}}
        {{/requests}}
      {{/currentRequest}}
    </div>
    <div class="rorvswild-live-panel__footer">
      This data is not sent to RoRvsWild. To Monitor your production environment, <a href="https://www.rorvswild.com" class="rorvswild-live-panel__footer__link">create an account</a>.
    </div>
  </div>
</script>

<script type="x-tmpl-mustache" data-partial="RorVsWild.Live.RequestSummary">
  <div data-events="click->goToRequestDetails" data-request-id="{{id}}" class="rorvswild-live-panel__request">
    <span class="rorvswild-live-panel__request__name">
      {{name}}
      <span class="rorvswild-live-panel__request__path">
        {{path}}
      </span>
    </span>
    <span class="rorvswild-live-panel__request__runtime">{{runtime}}<small>ms</small></span>
    <span class="rorvswild-live-panel__request__started-at">{{startedAt}}</span>
  </div>
</script>

<script type="x-tmpl-mustache" data-partial="RorVsWild.Live.RequestDetails">
  <div class="rorvswild-live-panel__request-details">
    <div class="rorvswild-live-panel__request-details__request">
      <span class="rorvswild-live-panel__request__name">
        <h2 class="rorvswild-live-panel__request__name__title">{{name}}</h2>
        <span class="rorvswild-live-panel__request__path">
          {{path}}
        </span>
      </span>
      <span class="rorvswild-live-panel__request__runtime">{{runtime}}<small>ms</small></span>
      <span class="rorvswild-live-panel__request__started-at">{{startedAt}}</span>
    </div>
    <div class="rorvswild-live-panel__request-details__sections">
      {{#sections}}
        {{> RorVsWild.Live.Section}}
      {{/sections}}
    </div>
  </div>
</script>

<script type="x-tmpl-mustache" data-partial="RorVsWild.Live.Section">
  <div class="rorvswild-live-panel__request-details__section">
    <div class="rorvswild-live-panel__request-details__section__main">
      <span class="rorvswild-live-panel__request-details__section__file">
        {{file}}:{{line}}
        <div class="rorvswild-live-panel__request-details__section__code">
          <span class="rorvswild-live-panel__request-details__section__kind">{{kind}}</span>
          <span class="rorvswild-live-panel__request-details__section__command">{{command}}</span>
        </div>
      </span>
      <span class="rorvswild-live-panel__request-details__section__average" title="average runtime">{{averageRuntime}}<small>ms</small></span>
      <span class="rorvswild-live-panel__request-details__section__calls" title="calls">x{{calls}}</span>
      <span class="rorvswild-live-panel__request-details__section__impact" title="impact">{{impact}}<small>&#37;</small></span>
    </div>

  </div>
</script>

<script>
  RoRvsWild = {};
  (function() {
    %{javascript_source}
    Barber.launch(document.rootElement, this)
  }.bind(RoRvsWild))()
</script>
